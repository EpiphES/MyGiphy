{"version":3,"file":"main.js","mappings":"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","sources":["webpack://my-giphy/./src/components/Navigation.js","webpack://my-giphy/./src/components/Api.js","webpack://my-giphy/./src/components/Form.js","webpack://my-giphy/./src/components/FormSearch.js","webpack://my-giphy/./src/components/Card.js","webpack://my-giphy/./src/components/Gallery.js","webpack://my-giphy/./src/components/SingleCard.js","webpack://my-giphy/./src/pages/index.js"],"sourcesContent":["export default class Navigation {\r\n  constructor(controlsSelector, handleTrending, handleRandom) {\r\n    this._controls = document.querySelector(controlsSelector);\r\n    this._controlsButtons = this._controls.querySelectorAll(\".header__link\");\r\n    this._handleTrending = handleTrending;\r\n    this._handleRandom = handleRandom;\r\n  }\r\n  init() {\r\n    this._controlsButtons.forEach((link) => {\r\n      link.addEventListener(\"click\", this._handleNavigation);\r\n    });\r\n\r\n    this._controls\r\n      .querySelector(\".header__link_type_trending\")\r\n      .addEventListener(\"click\", this._handleTrending);\r\n\r\n    this._controls\r\n      .querySelector(\".header__link_type_random\")\r\n      .addEventListener(\"click\", this._handleRandom);\r\n\r\n    history.replaceState({}, \"search\", \"#search\");\r\n\r\n    window.addEventListener(\"popstate\", this._popPage);\r\n  }\r\n\r\n  _handleNavigation = (evt) => {\r\n    evt.preventDefault();\r\n    const targetPage = evt.target.dataset.target;\r\n    this._toggleButtonState(evt.target);\r\n    this._toggleView(targetPage);\r\n    history.pushState({}, targetPage, `#${targetPage}`);\r\n  };\r\n\r\n  _toggleButtonState(button) {\r\n    this._controls\r\n      .querySelector(\".header__link_active\")\r\n      .classList.remove(\"header__link_active\");\r\n\r\n    button.classList.add(\"header__link_active\");\r\n  }\r\n\r\n  _toggleView(targetPage) {\r\n    document.querySelector(\".view_active\").classList.remove(\"view_active\");\r\n    document.getElementById(targetPage).classList.add(\"view_active\");\r\n  }\r\n\r\n  _popPage = () => {\r\n    const hash = location.hash.replace(\"#\", \"\");\r\n    this._toggleView(hash);\r\n    const button = Array.from(this._controlsButtons).find(\r\n      (item) => item.dataset.target === hash\r\n    );\r\n    this._toggleButtonState(button);\r\n  };\r\n}\r\n","export default class Api {\r\n  constructor(downloadUrl, uploadUrl, apiKey) {\r\n    this._downloadUrl = downloadUrl;\r\n    this._uploadUrl = uploadUrl;\r\n    this._apiKey = apiKey;\r\n  }\r\n\r\n  searchGifs(searchWord) {\r\n    return fetch(\r\n      `${this._downloadUrl}/search?api_key=${this._apiKey}&q=${searchWord}&limit=20`\r\n    ).then(this._checkResponse);\r\n  }\r\n\r\n  getTrendingGifs() {\r\n    return fetch(\r\n      `${this._downloadUrl}/trending?api_key=${this._apiKey}&limit=20`\r\n    ).then(this._checkResponse);\r\n  }\r\n\r\n  getRandomGif() {\r\n    return fetch(`${this._downloadUrl}/random?api_key=${this._apiKey}`).then(\r\n      this._checkResponse\r\n    );\r\n  }\r\n\r\n  uploadGifUrl(url, tags) {\r\n    const urlencoded = new URLSearchParams();\r\n    urlencoded.append(\"source_image_url\", url);\r\n    urlencoded.append(\"tags\", tags);\r\n    return fetch(\r\n      `${this._uploadUrl}?api_key=${this._apiKey}&source_image_url=${url}&tags=${tags}`,\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n        },\r\n        body: urlencoded,\r\n      }\r\n    ).then(this._checkResponse);\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка загрузки: ${res.status}`);\r\n  }\r\n}\r\n","export default class Form {\r\n  constructor(handleFormSubmit, formSelector) {\r\n    this._form = document.querySelector(formSelector);\r\n    this._handleFormSubmit = handleFormSubmit;\r\n\r\n    this._inputList = this._form.querySelectorAll(\".form__input\");\r\n    this._resetButton = this._form.querySelector(\".form__button_type_reset\");\r\n  }\r\n\r\n  _getInputValues() {\r\n    this._formValues = {};\r\n    this._inputList.forEach(\r\n      (input) => (this._formValues[input.name] = input.value)\r\n    );\r\n\r\n    return this._formValues;\r\n  }\r\n\r\n  _submitFormHandler = (evt) => {\r\n    evt.preventDefault();\r\n    this._handleFormSubmit(this._getInputValues(), this._form);\r\n  };\r\n\r\n  setEventListeners() {\r\n    this._form.addEventListener(\"submit\", this._submitFormHandler);\r\n  }\r\n}\r\n","import Form from \"./Form.js\";\r\n\r\nexport default class FormSearch extends Form {\r\n  constructor(handleFormSubmit, handleResetSearch, formSelector) {\r\n    super(handleFormSubmit, formSelector);\r\n    this._handleResetSearch = handleResetSearch;\r\n  }\r\n\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._resetButton.addEventListener(\"click\", () =>\r\n      this._handleResetSearch()\r\n    );\r\n  }\r\n}\r\n","export default class Card {\r\n  constructor(cardData, templateSelector) {\r\n    this._templateSelector = templateSelector;\r\n    this._cardData = cardData;\r\n  }\r\n\r\n  _getTemplate = () => {\r\n    const cardElement = document\r\n      .querySelector(this._templateSelector)\r\n      .content.cloneNode(true);\r\n\r\n    return cardElement;\r\n  };\r\n\r\n  generateCard() {\r\n    this._newCard = this._getTemplate();\r\n    this._cardImage = this._newCard.querySelector(\".gallery__image\");\r\n    this._cardTitle = this._newCard.querySelector(\".gallery__title\");\r\n\r\n    this._cardImage.src = this._cardData.images.downsized.url;\r\n    this._cardImage.alt = this._cardData.title;\r\n    this._cardTitle.textContent = this._cardData.title;\r\n\r\n    return this._newCard;\r\n  }\r\n}\r\n","export default class Gallery {\r\n  _renderer;\r\n  _container;\r\n\r\n  constructor(renderer, containerSelector) {\r\n    this._renderer = renderer;\r\n    this._container = document.querySelector(containerSelector);\r\n  }\r\n\r\n  renderItems(array) {\r\n    array.forEach((item) => this.addItem(item));\r\n  }\r\n\r\n  addItem(item) {\r\n    const cardElement = this._renderer(item);\r\n    this._container.append(cardElement);\r\n  }\r\n\r\n  resetList() {\r\n    while (this._container.firstChild) {\r\n      this._container.removeChild(this._container.firstChild);\r\n    }\r\n  }\r\n}\r\n","export default class SingleCard {\r\n  constructor(selector) {\r\n    this._card = document.querySelector(selector);\r\n    this._image = this._card.querySelector(\".single-card__image\");\r\n    this._title = this._card.querySelector(\".single-card__title\");\r\n  }\r\n  showCard(cardData) {\r\n    this._image.src = cardData.images.downsized.url;\r\n    this._image.alt = cardData.title;\r\n    this._title.textContent = cardData.title;\r\n  }\r\n  cleanCard() {\r\n    this._image.src = \"/\";\r\n    this._image.alt = \"\";\r\n    this._title.textContent = \"\";\r\n  }\r\n}\r\n","import \"./index.css\";\r\n\r\nimport Navigation from \"../components/Navigation.js\";\r\nimport Api from \"../components/Api.js\";\r\nimport Form from \"../components/Form.js\";\r\nimport FormSearch from \"../components/FormSearch.js\";\r\nimport Card from \"../components/Card.js\";\r\nimport Gallery from \"../components/Gallery.js\";\r\nimport SingleCard from \"../components/SingleCard.js\";\r\n\r\nconst api = new Api(\r\n  \"https://api.giphy.com/v1/gifs\",\r\n  \"https://upload.giphy.com/v1/gifs\",\r\n  \"U5zS22kTjXKZUEQVNwtDWaGWJZFSGT1L\"\r\n);\r\n\r\nconst navigation = new Navigation(\r\n  \".header__controls\",\r\n  handleGetTrending,\r\n  handleGetRandom\r\n);\r\nnavigation.init();\r\n\r\nconst formSearch = new FormSearch(\r\n  handleSearch,\r\n  handleResetSearch,\r\n  \".form_type_search\"\r\n);\r\nformSearch.setEventListeners();\r\n\r\nconst formUploadUrl = new Form(handleUploadUrl, \".form_type_upload\");\r\nformUploadUrl.setEventListeners();\r\n\r\nconst gallerySearch = new Gallery(addNewItem, \".gallery_place_search\");\r\n\r\nconst galleryTrending = new Gallery(addNewItem, \".gallery_place_trending\");\r\n\r\nconst randomGif = new SingleCard(\".single-card\");\r\n\r\nfunction addNewItem(cardData) {\r\n  return new Card(cardData, \".gallery__template\").generateCard();\r\n}\r\n\r\nfunction handleSearch({ search }) {\r\n  api\r\n    .searchGifs(search)\r\n    .then((res) => {\r\n      gallerySearch.resetList();\r\n      gallerySearch.renderItems(res.data);\r\n    })\r\n    .then(() => {})\r\n    .catch((err) => console.log(err));\r\n}\r\n\r\nfunction handleResetSearch() {\r\n  gallerySearch.resetList();\r\n}\r\n\r\nfunction handleGetTrending() {\r\n  api\r\n    .getTrendingGifs()\r\n    .then((res) => {\r\n      galleryTrending.resetList();\r\n      galleryTrending.renderItems(res.data);\r\n    })\r\n    .catch((err) => console.log(err));\r\n}\r\n\r\nfunction handleGetRandom() {\r\n  randomGif.cleanCard();\r\n  api\r\n    .getRandomGif()\r\n    .then((res) => {\r\n      randomGif.showCard(res.data);\r\n    })\r\n    .catch((err) => console.log(err));\r\n}\r\n\r\nfunction handleUploadUrl({ url, urltags }, form) {\r\n  const tags = urltags.trim().replaceAll(\",\", \" \").replace(/\\s+/g, \", \");\r\n  api\r\n    .uploadGifUrl(url, tags)\r\n    .then(() => {\r\n      alert(\"Ссылка отправлена\");\r\n      form.reset();\r\n    })\r\n    .catch((err) => console.log(err));\r\n}\r\n"],"names":["Navigation","controlsSelector","handleTrending","handleRandom","evt","preventDefault","targetPage","target","dataset","_toggleButtonState","_toggleView","history","pushState","hash","location","replace","button","Array","from","_controlsButtons","find","item","this","_controls","document","querySelector","querySelectorAll","_handleTrending","_handleRandom","forEach","link","addEventListener","_handleNavigation","replaceState","window","_popPage","classList","remove","add","getElementById","Api","downloadUrl","uploadUrl","apiKey","_downloadUrl","_uploadUrl","_apiKey","searchWord","fetch","then","_checkResponse","url","tags","urlencoded","URLSearchParams","append","method","headers","body","res","ok","json","Promise","reject","status","Form","handleFormSubmit","formSelector","_handleFormSubmit","_getInputValues","_form","_inputList","_resetButton","_formValues","input","name","value","_submitFormHandler","FormSearch","handleResetSearch","_handleResetSearch","Card","cardData","templateSelector","_templateSelector","content","cloneNode","_cardData","_newCard","_getTemplate","_cardImage","_cardTitle","src","images","downsized","alt","title","textContent","Gallery","renderer","containerSelector","_renderer","_container","array","addItem","cardElement","firstChild","removeChild","SingleCard","selector","_card","_image","_title","api","getTrendingGifs","galleryTrending","resetList","renderItems","data","catch","err","console","log","randomGif","cleanCard","getRandomGif","showCard","init","search","searchGifs","gallerySearch","setEventListeners","form","urltags","trim","replaceAll","uploadGifUrl","alert","reset","addNewItem","generateCard"],"sourceRoot":""}