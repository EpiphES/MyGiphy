{"version":3,"file":"main.js","mappings":"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","sources":["webpack://my-giphy/./src/components/Navigation.js","webpack://my-giphy/./src/components/Api.js","webpack://my-giphy/./src/components/Form.js","webpack://my-giphy/./src/components/FormSearch.js","webpack://my-giphy/./src/components/Card.js","webpack://my-giphy/./src/components/Gallery.js","webpack://my-giphy/./src/components/SingleCard.js","webpack://my-giphy/./src/pages/index.js"],"sourcesContent":["export default class Navigation {\r\n  constructor(controlsSelector, viewSelector, handleTrending, handleRandom) {\r\n    this._controls = document.querySelector(controlsSelector);\r\n    this._pages = document.querySelectorAll(viewSelector);\r\n    this._controlsButtons = this._controls.querySelectorAll(\".header__link\");\r\n    this._handleTrending = handleTrending;\r\n    this._handleRandom = handleRandom;\r\n  }\r\n  init() {\r\n    this._controlsButtons.forEach((link) => {\r\n      link.addEventListener(\"click\", this._handleNavigation);\r\n    });\r\n\r\n    this._controls\r\n      .querySelector(\".header__link_type_trending\")\r\n      .addEventListener(\"click\", this._handleTrending);\r\n\r\n    this._controls\r\n      .querySelector(\".header__link_type_random\")\r\n      .addEventListener(\"click\", this._handleRandom);\r\n\r\n    history.replaceState({}, \"search\", \"#search\");\r\n\r\n    window.addEventListener(\"popstate\", this._popPage);\r\n  }\r\n\r\n  _handleNavigation = (evt) => {\r\n    evt.preventDefault();\r\n    const targetPage = evt.target.dataset.target;\r\n    this._toggleButtonState(evt.target);\r\n    this._toggleView(targetPage);\r\n    history.pushState({}, targetPage, `#${targetPage}`);\r\n  };\r\n\r\n  _toggleButtonState(button) {\r\n    this._controls\r\n      .querySelector(\".header__link_active\")\r\n      .classList.remove(\"header__link_active\");\r\n\r\n    button.classList.add(\"header__link_active\");\r\n  }\r\n\r\n  _toggleView(targetPage) {\r\n    document.querySelector(\".view_active\").classList.remove(\"view_active\");\r\n    document.getElementById(targetPage).classList.add(\"view_active\");\r\n  }\r\n\r\n  _popPage = () => {\r\n    const hash = location.hash.replace(\"#\", \"\");\r\n    this._toggleView(hash);\r\n    const button = Array.from(this._controlsButtons).find(\r\n      (item) => item.dataset.target == hash\r\n    );\r\n    this._toggleButtonState(button);\r\n  };\r\n}\r\n","export default class Api {\r\n  constructor(downloadUrl, uploadUrl, apiKey) {\r\n    this._downloadUrl = downloadUrl;\r\n    this._uploadUrl = uploadUrl;\r\n    this._apiKey = apiKey;\r\n  }\r\n\r\n  searchGifs(searchWord) {\r\n    return fetch(\r\n      `${this._downloadUrl}/search?api_key=${this._apiKey}&q=${searchWord}&limit=20`\r\n    ).then(this._checkResponse);\r\n  }\r\n\r\n  getTrendingGifs() {\r\n    return fetch(\r\n      `${this._downloadUrl}/trending?api_key=${this._apiKey}&limit=20`\r\n    ).then(this._checkResponse);\r\n  }\r\n\r\n  getRandomGif() {\r\n    return fetch(`${this._downloadUrl}/random?api_key=${this._apiKey}`).then(\r\n      this._checkResponse\r\n    );\r\n  }\r\n\r\n  uploadGifUrl(url, tags) {\r\n    const urlencoded = new URLSearchParams();\r\n    urlencoded.append(\"source_image_url\", url);\r\n    urlencoded.append(\"tags\", tags);\r\n    return fetch(\r\n      `${this._uploadUrl}?api_key=${this._apiKey}&source_image_url=${url}&tags=${tags}`,\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n        },\r\n        body: urlencoded,\r\n      }\r\n    ).then(this._checkResponse);\r\n  }\r\n\r\n  uploadLocalGif(file, tags) {\r\n    const urlencoded = new URLSearchParams();\r\n    urlencoded.append(\"file\", file);\r\n    urlencoded.append(\"tags\", tags);\r\n    return fetch(\r\n      `${this._uploadUrl}?api_key=${this._apiKey}&file=${file}&tags=${tags}`,\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n        },\r\n        body: urlencoded,\r\n      }\r\n    ).then(this._checkResponse);\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка загрузки: ${res.status}`);\r\n  }\r\n}\r\n","export default class Form {\r\n  constructor(handleFormSubmit, formSelector) {\r\n    this._form = document.querySelector(formSelector);\r\n    this._handleFormSubmit = handleFormSubmit;\r\n\r\n    this._inputList = this._form.querySelectorAll(\".form__input\");\r\n    // this._submitButton = this._form.querySelector(\".form__button_type_search\");\r\n    this._resetButton = this._form.querySelector(\".form__button_type_reset\");\r\n  }\r\n\r\n  _getInputValues() {\r\n    this._formValues = {};\r\n    this._inputList.forEach(\r\n      (input) => (this._formValues[input.name] = input.value)\r\n    );\r\n\r\n    return this._formValues;\r\n  }\r\n\r\n  _submitFormHandler = (evt) => {\r\n    evt.preventDefault();\r\n    this._handleFormSubmit(this._getInputValues(), this._form);\r\n  };\r\n\r\n  setEventListeners() {\r\n    this._form.addEventListener(\"submit\", this._submitFormHandler);\r\n    this._resetButton.addEventListener(\"click\", () => {\r\n      this._form.reset();\r\n    });\r\n  }\r\n}\r\n","import Form from \"./Form.js\";\r\n\r\nexport default class FormSearch extends Form {\r\n  constructor(handleFormSubmit, handleResetSearch, formSelector) {\r\n    super(handleFormSubmit, formSelector);\r\n    this._handleResetSearch = handleResetSearch;\r\n  }\r\n\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._resetButton.addEventListener(\"click\", () =>\r\n      this._handleResetSearch()\r\n    );\r\n  }\r\n}\r\n","export default class Card {\r\n  constructor(cardData, templateSelector) {\r\n    this._templateSelector = templateSelector;\r\n    this._cardData = cardData;\r\n  }\r\n\r\n  _getTemplate = () => {\r\n    const cardElement = document\r\n      .querySelector(this._templateSelector)\r\n      .content.cloneNode(true);\r\n\r\n    return cardElement;\r\n  };\r\n\r\n  generateCard() {\r\n    this._newCard = this._getTemplate();\r\n    this._cardImage = this._newCard.querySelector(\".gallery__image\");\r\n    this._cardTitle = this._newCard.querySelector(\".gallery__title\");\r\n\r\n    this._cardImage.src = this._cardData.images.downsized.url;\r\n    this._cardImage.alt = this._cardData.title;\r\n    this._cardTitle.textContent = this._cardData.title;\r\n\r\n    return this._newCard;\r\n  }\r\n}\r\n","export default class Gallery {\r\n  _renderer;\r\n  _container;\r\n\r\n  constructor(renderer, containerSelector) {\r\n    this._renderer = renderer;\r\n    this._container = document.querySelector(containerSelector);\r\n  }\r\n\r\n  renderItems(array) {\r\n    array.forEach((item) => this.addItem(item));\r\n  }\r\n\r\n  addItem(item) {\r\n    const cardElement = this._renderer(item);\r\n    this._container.append(cardElement);\r\n  }\r\n\r\n  resetList() {\r\n    while (this._container.firstChild) {\r\n      this._container.removeChild(this._container.firstChild);\r\n    }\r\n  }\r\n}\r\n","export default class SingleCard {\r\n  constructor(selector) {\r\n    this._card = document.querySelector(selector);\r\n    this._image = this._card.querySelector(\".single-card__image\");\r\n    this._title = this._card.querySelector(\".single-card__title\");\r\n  }\r\n  showCard(cardData) {\r\n    this._image.src = cardData.images.downsized.url;\r\n    this._image.alt = cardData.title;\r\n    this._title.textContent = cardData.title;\r\n  }\r\n  cleanCard() {\r\n    this._image.src = \"/\";\r\n    this._image.alt = \"\";\r\n    this._title.textContent = \"\";\r\n  }\r\n}\r\n","import \"./index.css\";\r\n\r\nimport Navigation from \"../components/Navigation.js\";\r\nimport Api from \"../components/Api.js\";\r\nimport Form from \"../components/Form.js\";\r\nimport FormSearch from \"../components/FormSearch.js\";\r\nimport Card from \"../components/Card.js\";\r\nimport Gallery from \"../components/Gallery.js\";\r\nimport SingleCard from \"../components/SingleCard.js\";\r\n\r\nconst api = new Api(\r\n  \"https://api.giphy.com/v1/gifs\",\r\n  \"https://upload.giphy.com/v1/gifs\",\r\n  \"U5zS22kTjXKZUEQVNwtDWaGWJZFSGT1L\"\r\n);\r\n\r\nconst navigation = new Navigation(\r\n  \".header__controls\",\r\n  \".view\",\r\n  handleGetTrending,\r\n  handleGetRandom\r\n);\r\nnavigation.init();\r\n\r\nconst formSearch = new FormSearch(\r\n  handleSearch,\r\n  handleResetSearch,\r\n  \".form_type_search\"\r\n);\r\nformSearch.setEventListeners();\r\n\r\nconst formUploadUrl = new Form(handleUploadUrl, \".form_type_upload\");\r\nformUploadUrl.setEventListeners();\r\n\r\nconst gallerySearch = new Gallery(addNewItem, \".gallery_place_search\");\r\n\r\nconst galleryTrending = new Gallery(addNewItem, \".gallery_place_trending\");\r\n\r\nconst randomGif = new SingleCard(\".single-card\");\r\n\r\nfunction addNewItem(cardData) {\r\n  return new Card(cardData, \".gallery__template\").generateCard();\r\n}\r\n\r\nfunction handleSearch({ search }) {\r\n  api\r\n    .searchGifs(search)\r\n    .then((res) => {\r\n      gallerySearch.resetList();\r\n      gallerySearch.renderItems(res.data);\r\n    })\r\n    .then(() => {})\r\n    .catch((err) => console.log(err));\r\n}\r\n\r\nfunction handleResetSearch() {\r\n  gallerySearch.resetList();\r\n}\r\n\r\nfunction handleGetTrending() {\r\n  api\r\n    .getTrendingGifs()\r\n    .then((res) => {\r\n      galleryTrending.resetList();\r\n      galleryTrending.renderItems(res.data);\r\n    })\r\n    .catch((err) => console.log(err));\r\n}\r\n\r\nfunction handleGetRandom() {\r\n  randomGif.cleanCard();\r\n  api\r\n    .getRandomGif()\r\n    .then((res) => {\r\n      randomGif.showCard(res.data);\r\n    })\r\n    .catch((err) => console.log(err));\r\n}\r\n\r\nfunction handleUploadUrl({ url, urltags }, form) {\r\n  const tags = urltags.trim().replaceAll(\",\", \" \").replace(/\\s+/g, \", \");\r\n  api\r\n    .uploadGifUrl(url, tags)\r\n    .then(() => {\r\n      alert(\"Ссылка отправлена\");\r\n      form.reset();\r\n    })\r\n    .catch((err) => console.log(err));\r\n}\r\n"],"names":["Navigation","controlsSelector","viewSelector","handleTrending","handleRandom","evt","preventDefault","targetPage","target","dataset","_toggleButtonState","_toggleView","history","pushState","hash","location","replace","button","Array","from","_controlsButtons","find","item","this","_controls","document","querySelector","_pages","querySelectorAll","_handleTrending","_handleRandom","forEach","link","addEventListener","_handleNavigation","replaceState","window","_popPage","classList","remove","add","getElementById","Api","downloadUrl","uploadUrl","apiKey","_downloadUrl","_uploadUrl","_apiKey","searchWord","fetch","then","_checkResponse","url","tags","urlencoded","URLSearchParams","append","method","headers","body","file","res","ok","json","Promise","reject","status","Form","handleFormSubmit","formSelector","_handleFormSubmit","_getInputValues","_form","_inputList","_resetButton","_formValues","input","name","value","_submitFormHandler","reset","FormSearch","handleResetSearch","_handleResetSearch","Card","cardData","templateSelector","_templateSelector","content","cloneNode","_cardData","_newCard","_getTemplate","_cardImage","_cardTitle","src","images","downsized","alt","title","textContent","Gallery","renderer","containerSelector","_renderer","_container","array","addItem","cardElement","firstChild","removeChild","SingleCard","selector","_card","_image","_title","api","getTrendingGifs","galleryTrending","resetList","renderItems","data","catch","err","console","log","randomGif","cleanCard","getRandomGif","showCard","init","search","searchGifs","gallerySearch","setEventListeners","form","urltags","trim","replaceAll","uploadGifUrl","alert","addNewItem","generateCard"],"sourceRoot":""}